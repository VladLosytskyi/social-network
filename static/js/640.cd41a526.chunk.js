"use strict";(self.webpackChunksocial_network=self.webpackChunksocial_network||[]).push([[640],{5640:function(s,e,t){t.r(e),t.d(e,{default:function(){return ss}});var a=t(8683),n=t(2791),o=t(7781),r=t(364),i=t(6871),l=t(6070),c="Profile_profile__n+LxT",u=t(2982),d="MyPosts_newPostForm__7OkJy",f="MyPosts_postsBlock__xF1+G",h="MyPosts_posts__qWDsY",m="MyPosts_blueButton__CybSN",p="Post_post__G6WIJ",x="Post_profileImage__DT8Ht",j="Post_postText__8zl55",_="Post_likes__4-pyj",v=t(184),N=function(s){var e=s.message,t=s.likesCount;return(0,v.jsxs)("div",{className:p,children:[(0,v.jsx)("img",{className:x,src:"https://cdn-icons-png.flaticon.com/512/1464/1464795.png",alt:"Profile avatar"}),(0,v.jsxs)("div",{children:[(0,v.jsx)("div",{className:j,children:e}),(0,v.jsxs)("div",{className:_,children:[t,(0,v.jsx)("span",{children:" likes"})]})]})]})},g=t(6139),b=t(704),P=t(5441),k=t(7791),C=[k.C,(0,k.D)(50)],I=(0,b.Z)({form:"profileMyPostsForm"})((function(s){var e=s.handleSubmit;return(0,v.jsxs)("form",{onSubmit:e,children:[(0,v.jsx)("div",{className:d,children:(0,v.jsx)(g.Z,{component:P.g,name:"newPostText",placeholder:"Enter your post text...",validate:C})}),(0,v.jsx)("div",{children:(0,v.jsx)("button",{className:m,children:"Add post"})})]})})),S=n.memo((function(s){var e=(0,u.Z)(s.posts).reverse().map((function(s){return(0,v.jsx)(N,{message:s.message,likesCount:s.likesCount},s.id)}));return(0,v.jsxs)("div",{className:f,children:[(0,v.jsx)("h3",{children:"My posts"}),(0,v.jsx)(I,{onSubmit:function(e){s.addPost(e.newPostText)}}),(0,v.jsx)("div",{className:h,children:e})]})})),y={addPost:l.q2},A=(0,r.$j)((function(s){return{posts:s.profilePage.posts}}),y)(S),F=t(885),M="ProfileInfo_mr5__Gb1Ad",w="ProfileInfo_blueText__aphDT",O="ProfileInfo_profileInfo__rys-e",Z="ProfileInfo_userAvatarContainer__n700o",T="ProfileInfo_userAvatar__TFwT5",D="ProfileInfo_setUserAvatar__TrEOD",J="ProfileInfo_profileData__0LXHh",U="ProfileInfo_status__FQ334",E="ProfileInfo_statusInput__-cX0T",X="ProfileInfo_fieldsContainer__069OX",q="ProfileInfo_fieldContainer__49XEQ",L="ProfileInfo_contact__x4Eli",Q="ProfileInfo_error__goQFX",Y="ProfileInfo_buttonsContainer__QNCkM",B="ProfileInfo_blueButton__VqmxD",G=t(393),H=t(6135),R=function(s){var e=(0,n.useState)(!1),t=(0,F.Z)(e,2),a=t[0],o=t[1],r=(0,n.useState)(s.status),i=(0,F.Z)(r,2),l=i[0],c=i[1];(0,n.useEffect)((function(){c(s.status)}),[s.status]);return(0,v.jsx)("div",{children:s.isOwner?(0,v.jsx)(v.Fragment,{children:a?(0,v.jsxs)("div",{className:U,children:[(0,v.jsxs)("div",{children:[(0,v.jsx)("span",{className:w,children:"Status:"}),(0,v.jsx)("input",{type:"text",onChange:function(s){c(s.currentTarget.value)},value:l,autoFocus:!0,className:E})]}),(0,v.jsxs)("div",{className:Y,children:[(0,v.jsx)("button",{onClick:function(){o(!1),s.updateStatus(l)},className:B,style:{marginRight:"10px"},children:"Save Changes"}),(0,v.jsx)("button",{onClick:function(){o(!1)},className:B,children:"Discard Changes"})]})]}):(0,v.jsxs)("div",{className:U,children:[(0,v.jsxs)("div",{children:[(0,v.jsx)("span",{className:w,children:"Status: "}),(0,v.jsx)("span",{children:s.status||"No status"})]}),(0,v.jsx)("button",{onClick:function(){o(!0)},className:B,children:(0,v.jsx)("span",{children:"Change Status"})})]})}):(0,v.jsx)("div",{className:U,children:(0,v.jsxs)("div",{children:[(0,v.jsx)("span",{className:w,children:"Status: "}),(0,v.jsx)("span",{children:s.status||"No status"})]})})})},V=function(s){var e=s.profile,t=s.isOwner,a=s.activateEditMode;return(0,v.jsxs)("div",{className:J,children:[(0,v.jsxs)("div",{className:X,children:[(0,v.jsxs)("div",{children:[(0,v.jsx)("span",{className:"".concat(w," ").concat(M),children:"Full Name:"}),e.fullName]}),(0,v.jsxs)("div",{children:[(0,v.jsx)("span",{className:"".concat(w," ").concat(M),children:"About Me:"}),e.aboutMe||"No info"]}),(0,v.jsxs)("div",{children:[(0,v.jsx)("span",{className:"".concat(w," ").concat(M),children:"Looking for a job:"}),e.lookingForAJob?"Yes":"No"]}),e.lookingForAJob&&(0,v.jsxs)("div",{children:[(0,v.jsx)("span",{className:"".concat(w," ").concat(M),children:"My Professional Skills:"}),e.lookingForAJobDescription||"No Skills"]}),(0,v.jsxs)("div",{children:[(0,v.jsx)("span",{className:w,children:"Contacts:"}),Object.keys(e.contacts).filter((function(s){return e.contacts[s]})).map((function(s){return(0,v.jsx)("div",{className:L,children:(0,v.jsx)("a",{href:e.contacts[s],target:"_blank",children:s})},s)}))]})]}),t&&(0,v.jsx)("div",{className:Y,children:(0,v.jsx)("button",{className:B,onClick:a,children:"Edit Info"})})]})},W=(0,b.Z)({form:"edit-profile-data"})((function(s){var e=s.contacts,t=s.discardChanges,a=s.handleSubmit,n=s.error;return(0,v.jsxs)("form",{className:J,onSubmit:a,children:[(0,v.jsxs)("div",{className:X,children:[(0,v.jsxs)("div",{className:q,children:[(0,v.jsx)("label",{htmlFor:"fullName",className:w,children:"Full Name:"}),(0,v.jsx)(g.Z,{component:P.I,name:"fullName",id:"fullName",type:"text",placeholder:"Your full name"})]}),(0,v.jsxs)("div",{className:q,children:[(0,v.jsx)("label",{htmlFor:"aboutMe",className:w,children:"About Me:"}),(0,v.jsx)(g.Z,{component:P.g,name:"aboutMe",id:"aboutMe",type:"text",placeholder:"Tell about yourself"})]}),(0,v.jsxs)("div",{className:q,children:[(0,v.jsx)("label",{htmlFor:"lookingForAJob",className:w,children:"Looking For a Job:"}),(0,v.jsx)(g.Z,{component:P.I,name:"lookingForAJob",id:"lookingForAJob",type:"checkbox"})]}),(0,v.jsxs)("div",{className:q,children:[(0,v.jsx)("label",{htmlFor:"lookingForAJobDescription",className:w,children:"My Professional Skills:"}),(0,v.jsx)(g.Z,{component:P.g,name:"lookingForAJobDescription",id:"lookingForAJobDescription",type:"text",placeholder:"Your professional skills"})]}),(0,v.jsxs)("div",{className:q,children:[(0,v.jsx)("span",{className:w,children:"Contacts:"}),Object.keys(e).map((function(s){return(0,v.jsxs)("div",{className:L,children:[(0,v.jsxs)("label",{className:w,children:[s,": "]}),(0,v.jsx)(g.Z,{component:P.I,name:"contacts.".concat(s),id:s,type:"text",placeholder:s})]},s)}))]})]}),n&&(0,v.jsx)("div",{className:Q,children:n}),(0,v.jsxs)("div",{className:Y,children:[(0,v.jsx)("button",{className:B,style:{marginRight:"10px"},children:"Save Changes"}),(0,v.jsx)("button",{className:B,onClick:t,children:"Discard Changes"})]})]})})),$=function(s){var e=s.profile,t=s.status,a=s.updateProfile,o=s.updateStatus,r=s.postUserAvatar,i=s.isOwner,l=(0,n.useState)(!1),c=(0,F.Z)(l,2),u=c[0],d=c[1];return(0,v.jsx)(v.Fragment,{children:e?(0,v.jsxs)("div",{className:O,children:[(0,v.jsxs)("div",{className:Z,children:[(0,v.jsx)("img",{src:e.photos.large||G,className:T,alt:"Profile photo"}),i&&(0,v.jsxs)("label",{className:"".concat(D," ").concat(B),children:[(0,v.jsx)("input",{type:"file",accept:"image/png, image/jpg, image/gif, image/jpeg",onChange:function(s){s.target.files.length&&r(s.target.files[0])}}),(0,v.jsx)("span",{children:"Change Avatar"})]})]}),(0,v.jsx)(R,{status:t,updateStatus:o,isOwner:i}),u?(0,v.jsx)(W,{initialValues:e,contacts:e.contacts,discardChanges:function(){return d(!1)},onSubmit:function(s){a(s).then((function(){d(!1)}))}}):(0,v.jsx)(V,{profile:e,isOwner:i,activateEditMode:function(){return d(!0)}})]}):(0,v.jsx)(H.Z,{})})},z=function(s){var e=s.profile,t=s.status,a=s.updateProfile,n=s.updateStatus,o=s.postUserAvatar,r=s.isOwner;return(0,v.jsxs)("section",{className:c,children:[(0,v.jsx)($,{profile:e,status:t,updateProfile:a,updateStatus:n,postUserAvatar:o,isOwner:r}),(0,v.jsx)(A,{})]})};var K={getUserProfile:l.et,getStatus:l.lR,updateProfile:l.ck,updateStatus:l.Nf,postUserAvatar:l.Oe},ss=(0,o.qC)((0,r.$j)((function(s){return{profile:s.profilePage.profile,status:s.profilePage.status,authorisedUserId:s.auth.userId,isAuth:s.auth.isAuth}}),K),(function(s){return function(e){var t=(0,i.TH)(),n=(0,i.s0)(),o=(0,i.UO)();return(0,v.jsx)(s,(0,a.Z)((0,a.Z)({},e),{},{router:{location:t,navigate:n,params:o}}))}}))((function(s){return(0,n.useEffect)((function(){var e=s.router.params.userId;e||(e=s.authorisedUserId)||s.history.push("/login"),s.getUserProfile(e),s.getStatus(e)}),[s.router.params.userId]),(0,v.jsx)(z,{profile:s.profile,status:s.status,updateProfile:s.updateProfile,updateStatus:s.updateStatus,postUserAvatar:s.postUserAvatar,isOwner:!s.router.params.userId})}))}}]);
//# sourceMappingURL=640.cd41a526.chunk.js.map