"use strict";(self.webpackChunksocial_network=self.webpackChunksocial_network||[]).push([[231],{5231:function(e,s,a){a.r(s),a.d(s,{default:function(){return S}});var t=a(885),r=a(2791),n=a(364),c="Chat_chatPage__vBaCB",i="Chat_messages__UMxjL",l="Chat_message__ySW5b",o="Chat_avatar__bWlGc",u="Chat_body__flGjt",d="Chat_userName__BoRkW",h="Chat_addMessageFormContainer__wKqkF",_="Chat_addMessageForm__gH2ye",m="Chat_blueButton__jLeDQ",f="Chat_error__Mbegr",v=a(9095),g=a(184),j=function(e){var s=e.webSocketStatus,a=(0,r.useState)(""),c=(0,t.Z)(a,2),i=c[0],l=c[1],o=(0,n.I0)();return(0,g.jsxs)("div",{className:_,children:[(0,g.jsx)("textarea",{onChange:function(e){return l(e.currentTarget.value)},value:i}),(0,g.jsx)("button",{disabled:"ready"!==s,onClick:function(){i&&(o((0,v.Tu)(i)),l(""))},className:m,children:"Send"})]})},x=a(3504),C=a(393),N=r.memo((function(e){var s=e.message,a=s.userId,t=s.photo,r=s.userName,n=s.message;return(0,g.jsxs)("div",{className:l,children:[(0,g.jsx)(x.OL,{to:"/profile/".concat(a),className:o,children:(0,g.jsx)("img",{src:t||C,alt:C})}),(0,g.jsxs)("div",{className:u,children:[(0,g.jsx)("div",{className:d,children:r}),(0,g.jsx)("div",{className:l,children:n})]})]})})),b=function(e){return e.chatPage.messages},k=function(e){return e.chatPage.webSocketStatus},S=function(){var e=(0,r.useState)(!0),s=(0,t.Z)(e,2),a=s[0],l=s[1],o=(0,n.v9)(b),u=(0,n.v9)(k),d=(0,r.useRef)(null),_=(0,n.I0)();return(0,r.useEffect)((function(){return _((0,v.LN)()),function(){return _((0,v.c4)())}}),[]),(0,r.useEffect)((function(){var e;a&&(null===(e=d.current)||void 0===e||e.scrollIntoView({behavior:"smooth"}))}),[o]),(0,g.jsxs)(g.Fragment,{children:["error"===u&&(0,g.jsx)("div",{className:c,children:(0,g.jsx)("div",{className:f,children:"Some Error Occurred. Please, refresh the page"})}),(0,g.jsxs)("section",{className:c,children:[(0,g.jsxs)("div",{className:i,onScroll:function(e){var s=e.currentTarget;Math.abs(s.scrollHeight-s.scrollTop-s.clientHeight)<300?!a&&l(!0):a&&l(!1)},children:[o.map((function(e){return(0,g.jsx)(N,{message:e},e.id)})),(0,g.jsx)("div",{ref:d})]}),(0,g.jsx)("div",{className:h,children:(0,g.jsx)(j,{webSocketStatus:u})})]})]})}}}]);
//# sourceMappingURL=231.49648cb6.chunk.js.map