"use strict";(self.webpackChunksocial_network=self.webpackChunksocial_network||[]).push([[87],{3087:function(s,e,t){t.r(e),t.d(e,{default:function(){return X}});var a=t(8683),r=t(2791),n=t(7781),i=t(364),o=t(6871),u=t(6070),l="Profile_profile__n+LxT",c=t(2982),d="MyPosts_postsBlock__xF1+G",f="MyPosts_posts__qWDsY",p="MyPosts_blueButton__CybSN",h="Post_post__G6WIJ",x="Post_profileImage__DT8Ht",j="Post_postText__8zl55",m="Post_likes__4-pyj",_=t(184),v=function(s){var e=s.message,t=s.likesCount;return(0,_.jsxs)("div",{className:h,children:[(0,_.jsx)("img",{className:x,src:"https://cdn-icons-png.flaticon.com/512/1464/1464795.png",alt:"Profile avatar"}),(0,_.jsxs)("div",{children:[(0,_.jsx)("div",{className:j,children:e}),(0,_.jsxs)("div",{className:m,children:[t,(0,_.jsx)("span",{children:" likes"})]})]})]})},g=t(6139),N=t(704),I=t(5441),P=t(7791),S=[P.C,(0,P.D)(50)],C=(0,N.Z)({form:"profileMyPostsForm"})((function(s){var e=s.handleSubmit;return(0,_.jsxs)("form",{onSubmit:e,children:[(0,_.jsx)("div",{children:(0,_.jsx)(g.Z,{component:I.g,name:"newPostText",placeholder:"Enter your post text...",validate:S})}),(0,_.jsx)("div",{children:(0,_.jsx)("button",{className:p,children:"Add post"})})]})})),U=r.memo((function(s){var e=(0,c.Z)(s.posts).reverse().map((function(s){return(0,_.jsx)(v,{message:s.message,likesCount:s.likesCount},s.id)}));return(0,_.jsxs)("div",{className:d,children:[(0,_.jsx)("h3",{children:"My posts"}),(0,_.jsx)(C,{onSubmit:function(e){s.addPost(e.newPostText)}}),(0,_.jsx)("div",{className:f,children:e})]})})),k={addPost:u.q2},b=(0,i.$j)((function(s){return{posts:s.profilePage.posts}}),k)(U),A="ProfileInfo_blueText__aphDT",T="ProfileInfo_profileInfo__rys-e",y="ProfileInfo_userAvatarContainer__n700o",D="ProfileInfo_userAvatar__TFwT5",Z="ProfileInfo_setUserAvatar__TrEOD",w="ProfileInfo_profileData__0LXHh",F="ProfileInfo_status__FQ334",M="ProfileInfo_statusInput__-cX0T",q="ProfileInfo_blueButton__VqmxD",E=t(393),B=t(6135),H=t(885),O=function(s){var e=(0,r.useState)(!1),t=(0,H.Z)(e,2),a=t[0],n=t[1],i=(0,r.useState)(s.status),o=(0,H.Z)(i,2),u=o[0],l=o[1];(0,r.useEffect)((function(){l(s.status)}),[s.status]);return(0,_.jsx)("div",{children:s.userId===s.authorisedUserId?(0,_.jsx)(_.Fragment,{children:a?(0,_.jsxs)("div",{className:F,children:[(0,_.jsxs)("div",{children:[(0,_.jsx)("span",{className:A,children:"Status:"}),(0,_.jsx)("input",{type:"text",onChange:function(s){l(s.currentTarget.value)},value:u,autoFocus:!0,className:M})]}),(0,_.jsxs)("div",{children:[(0,_.jsx)("button",{onClick:function(){n(!1),s.updateStatus(u)},className:q,children:"Save Changes"}),(0,_.jsx)("button",{onClick:function(){n(!1)},className:q,children:"Discard Changes"})]})]}):(0,_.jsxs)("div",{className:F,children:[(0,_.jsxs)("div",{children:[(0,_.jsx)("span",{className:A,children:"Status: "}),(0,_.jsx)("span",{children:s.status||"No status"})]}),(0,_.jsx)("button",{onClick:function(){n(!0)},className:q,children:"Change Status"})]})}):(0,_.jsx)("div",{className:F,children:(0,_.jsxs)("div",{children:[(0,_.jsx)("span",{className:A,children:"Status: "}),(0,_.jsx)("span",{children:s.status||"No status"})]})})})},G=function(s){var e=s.profile,t=s.authorisedUserId,a=s.status,r=s.updateStatus,n=s.postUserAvatar,i=function(s){s.target.files.length&&n(s.target.files[0])};return(0,_.jsx)(_.Fragment,{children:e?(0,_.jsxs)("div",{className:T,children:[(0,_.jsxs)("div",{className:y,children:[(0,_.jsx)("img",{src:e.photos.large||E,className:D,alt:"Profile photo"}),e.userId===t&&(0,_.jsxs)("label",{className:"".concat(Z," ").concat(q),onChange:i,children:[(0,_.jsx)("input",{type:"file",accept:"image/png, image/jpg, image/gif, image/jpeg",onChange:i}),"Change Avatar"]})]}),(0,_.jsxs)("div",{className:w,children:[(0,_.jsx)("span",{className:A,children:"Nickname: "}),(0,_.jsx)("span",{children:e.fullName}),(0,_.jsx)(O,{status:a,updateStatus:r,userId:e.userId,authorisedUserId:t})]})]}):(0,_.jsx)(B.Z,{})})},L=function(s){var e=s.profile,t=s.authorisedUserId,a=s.status,r=s.updateStatus,n=s.postUserAvatar;return(0,_.jsxs)("section",{className:l,children:[(0,_.jsx)(G,{profile:e,authorisedUserId:t,status:a,updateStatus:r,postUserAvatar:n}),(0,_.jsx)(b,{})]})};var W={getUserProfile:u.et,getStatus:u.lR,updateStatus:u.Nf,postUserAvatar:u.Oe},X=(0,n.qC)((0,i.$j)((function(s){return{profile:s.profilePage.profile,status:s.profilePage.status,authorisedUserId:s.auth.userId,isAuth:s.auth.isAuth}}),W),(function(s){return function(e){var t=(0,o.TH)(),r=(0,o.s0)(),n=(0,o.UO)();return(0,_.jsx)(s,(0,a.Z)((0,a.Z)({},e),{},{router:{location:t,navigate:r,params:n}}))}}))((function(s){return(0,r.useEffect)((function(){var e=s.router.params.userId;e||(e=s.authorisedUserId)||s.history.push("/login"),s.getUserProfile(e),s.getStatus(e)}),[s.router.params.userId]),(0,_.jsx)(L,{profile:s.profile,authorisedUserId:s.authorisedUserId,status:s.status,updateStatus:s.updateStatus,postUserAvatar:s.postUserAvatar})}))}}]);
//# sourceMappingURL=87.6c986977.chunk.js.map