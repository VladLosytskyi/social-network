"use strict";(self.webpackChunksocial_network=self.webpackChunksocial_network||[]).push([[567],{567:function(e,n,s){s.r(n),s.d(n,{default:function(){return C}});var a=s(2982),t=s(885),r=s(2791),c="Chat_chatPage__vBaCB",l="Chat_messages__UMxjL",i="Chat_message__ySW5b",o="Chat_avatar__bWlGc",u="Chat_body__flGjt",d="Chat_userName__BoRkW",v="Chat_blueButton__jLeDQ",h="Chat_addMessageFormContainer__wKqkF",m="Chat_addMessageForm__gH2ye",f=s(184),_=function(e){var n=e.chatHandler,s=(0,r.useState)(""),a=(0,t.Z)(s,2),c=a[0],l=a[1],i=(0,r.useState)("closed"),o=(0,t.Z)(i,2),u=o[0],d=o[1];(0,r.useEffect)((function(){var e=function(){d("open")};return null===n||void 0===n||n.addEventListener("open",e),function(){null===n||void 0===n||n.removeEventListener("open",e)}}),[n]);return(0,f.jsxs)("div",{className:m,children:[(0,f.jsx)("textarea",{onChange:function(e){return l(e.currentTarget.value)},value:c}),(0,f.jsx)("button",{disabled:null===n||"closed"===u,onClick:function(){c&&(null===n||void 0===n||n.send(c),l(""))},className:v,children:"Send"})]})},j=s(393),x=function(e){var n=e.message,s=n.photo,a=n.userName,t=n.message;return(0,f.jsxs)("div",{className:i,children:[(0,f.jsx)("div",{className:o,children:(0,f.jsx)("img",{src:s||j,alt:j})}),(0,f.jsxs)("div",{className:u,children:[(0,f.jsx)("div",{className:d,children:a}),(0,f.jsx)("div",{className:i,children:t})]})]})},C=function(){var e=(0,r.useState)(null),n=(0,t.Z)(e,2),s=n[0],i=n[1],o=(0,r.useState)([]),u=(0,t.Z)(o,2),d=u[0],v=u[1];return(0,r.useEffect)((function(){var e,n=function(){setTimeout(s,3e3)},s=function(){var s,a;null===(s=e)||void 0===s||s.removeEventListener("close",n),null===(a=e)||void 0===a||a.close(),(e=new WebSocket("wss://social-network.samuraijs.com/handlers/ChatHandler.ashx")).addEventListener("close",n),i(e)};return s(),function(){e.removeEventListener("close",n),e.close()}}),[]),(0,r.useEffect)((function(){var e=function(e){var n=JSON.parse(e.data);return v((function(e){return[].concat((0,a.Z)(e),(0,a.Z)(n))}))};return null===s||void 0===s||s.addEventListener("message",e),function(){null===s||void 0===s||s.removeEventListener("message",e)}}),[s]),(0,f.jsxs)("section",{className:c,children:[(0,f.jsx)("div",{className:l,children:d.map((function(e,n){return(0,f.jsx)(x,{message:e},n)}))}),(0,f.jsx)("div",{className:h,children:(0,f.jsx)(_,{chatHandler:s})})]})}}}]);
//# sourceMappingURL=567.8b8ee046.chunk.js.map